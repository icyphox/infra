apiVersion: v1
data:
  default.conf: |
    server {
        listen 80;

        location ~* ^.+\.(css|png|ico)$ {
            root /usr/share/webapps/cgit/static;
            add_header Last-Modified $date_gmt;
            add_header Cache-Control 'no-store, no-cache, must-revalidate, proxy-revalidate, max-age=0';
            if_modified_since off;
            expires off;
            etag off;
        }

        location / {
            fastcgi_pass  unix:/run/fcgiwrap.socket;
            fastcgi_param SCRIPT_FILENAME /usr/share/webapps/cgit/cgit.cgi;
            fastcgi_param PATH_INFO       $uri;
            fastcgi_param QUERY_STRING    $args;
        }
    }
kind: ConfigMap
metadata:
  name: cgit-nginx
